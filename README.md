# Ensure.Generator

A .NET tool for generating test code from specification files.

## Installation

```bash
dotnet tool install --global Ensure.Generator
```

## Usage

1. Create a specification file (e.g., `example.spec.md`) in your test project
2. Run the generator:

```bash
ensure -s path/to/specs -o path/to/output -n namespace
```

## Examples

### Scenario-Based Tests

```markdown
# User Authentication

* Navigate to "login" page
* Clear browser cookies
* Initialize test database

## User can login successfully
* Enter username "john.doe@example.com"
* Enter password "securePass123"
* Click login button
* Verify user is redirected to "dashboard"
* Verify welcome message shows "Welcome, John Doe"
```

### Table-Driven Tests

```markdown
# User Data Validation

## Validate Multiple Users

* When I validate multiple users data

| Name  | Age | Email           |
|-------|-----|-----------------|
| John  | 25  | john@email.com  |
| Alice | 30  | alice@email.com |

* Then all users should be valid
```

## Generated Code

The tool generates both test classes and step definitions. Here's what the generated code looks like:

### Generated Test Class

```csharp
// <auto-generated />
public abstract class UserAuthenticationTestsBase
{
    protected abstract UserAuthenticationStepsBase Steps { get; }

    [Fact]
    public async Task UserCanLoginSuccessfully()
    {
        await Steps.NavigateToPage("login");
        await Steps.ClearBrowserCookies();
        await Steps.InitializeTestDatabase();
        await Steps.EnterUsername("john.doe@example.com");
        await Steps.EnterPassword("securePass123");
        await Steps.ClickLoginButton();
        await Steps.VerifyUserIsRedirectedTo("dashboard");
        await Steps.VerifyWelcomeMessageShows("Welcome, John Doe");
    }
}
```

### Generated Step Definitions

```csharp
// <auto-generated />
public abstract class UserAuthenticationStepsBase
{
    /// <summary>
    /// Navigate to "login" page
    /// </summary>
    public abstract Task NavigateToPage(string param1);

    /// <summary>
    /// Enter username "john.doe@example.com"
    /// </summary>
    public abstract Task EnterUsername(string param1);

    // ... other step definitions
}
```

To implement the tests, create a concrete class that inherits from the generated base class and implements the step definitions:

```csharp
public class UserAuthenticationTests : UserAuthenticationTestsBase
{
    protected override UserAuthenticationSteps Steps => new();
}

public class UserAuthenticationSteps : UserAuthenticationStepsBase
{
    public override async Task NavigateToPage(string page)
    {
        // Your implementation here
    }

    // Implement other steps...
}
```

## Features

- Generates test code from markdown specification files
- Supports BDD-style specifications
- Easy integration with existing test projects
- Table-driven test scenarios
- Scenario-based test cases
- Common setup and teardown support

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details. 