// <auto-generated />
using System.Threading.Tasks;
using System.Collections.Generic;
using System.Text.Json;
using Xunit;

namespace Ensure.Examples
{
    public abstract class UserAuthenticationTestsBase
    {
        protected abstract UserAuthenticationStepsBase Steps { get; }


        [Fact]
        public async Task UserCanLoginSuccessfully()
        {
            await Steps.NavigateToPage("login");
            await Steps.ClearBrowserCookies();
            await Steps.InitializeTestDatabase();
            await Steps.EnterUsername("john.doe@example.com");
            await Steps.EnterPassword("securePass123");
            await Steps.ClickLoginButton();
            await Steps.VerifyUserIsRedirectedTo("dashboard");
            await Steps.VerifyWelcomeMessageShows("Welcome, John Doe");
        }

        [Fact]
        public async Task LoginFailsWithInvalidCredentials()
        {
            await Steps.NavigateToPage("login");
            await Steps.ClearBrowserCookies();
            await Steps.InitializeTestDatabase();
            await Steps.EnterUsername("john.doe@example.com");
            await Steps.EnterPassword("wrongpass");
            await Steps.ClickLoginButton();
            await Steps.VerifyErrorMessage("Invalid credentials");
            await Steps.VerifyUserRemainsOnPage("login");
        }
    }
}
